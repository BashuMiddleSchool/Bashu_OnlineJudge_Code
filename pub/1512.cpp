#include<bits/stdc++.h>
using namespace std;
int main() {
	int front[205],rear[205],f[205][205]={0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},sum=0,n,i,t,j,k;
	cin>>n;
	for(i=1;i<=n;i++) {        //变直( ??
		cin>>front[i];    
		front[i+n]=front[i];
	}
	for(i=1;i<=2*n-1;i++)rear[i]=front[i+1];
	rear[n*2]=front[1];
	for(i=1; i<=2*n-1; i++)
	f[i][i]=0;                     //init
	for(t=1; t<=n-1; t++) 
		for(i=1; i<=n*2-t; i++) { //front
			j=i+t; //rear
			for(k=i; k<=j-1; k++) //决策
				f[i][j]=max(f[i][j],f[i][k]+f[k+1][j]+front[i]*rear[k]*rear[j]);
		}
	for(i=1; i<=n; i++)
	sum=max(sum,f[i][i+n-1]); //max
	cout<<sum<<endl;
	return 0;
}
/*
                                --
                               -  -
                              -  I -
                              -  O -
                              -  I -
                              - 英 -
                              - 熊 -
                              - 纪 -
                              - 念 -
                              - 碑 -
                              -    -
                ---------------    ----------------
*/      